# YouTube Comment Scraper & Search Tools

This repo contains two command-line helpers for working with public YouTube comments:

- `ytcomments.py` downloads every public comment from a video using
  [`youtube-comment-downloader`](https://github.com/egbertbouman/youtube-comment-downloader),
  saves both the nested JSON and flattened CSV, and performs boolean keyword searches
  (supports `AND`/`OR`, quotes for phrases, and parentheses). Each run creates a
  title-based subdirectory holding the exported data plus a `search_<query>.txt` log when a search is performed.
- `ytsearch.py` provides offline keyword searches against a previously downloaded
  `comments.csv`. Run it from inside a directory generated by `ytcomments.py`; it
  reuses the same boolean logic and writes a matching search log.

## Requirements

- Python 3.8 or newer
- `youtube-comment-downloader` (`python3 -m pip install youtube-comment-downloader`)
- `tqdm` for the progress bar (`python3 -m pip install tqdm`)

No YouTube API key is needed—the downloader scrapes public comment data.

## Usage

### Download comments + optional search

```bash
python3 ytcomments.py
```

You'll be prompted for:

1. **Video URL** – any standard YouTube watch or share link.
2. **Keyword expression** – leave blank to skip searching, or supply a boolean
   expression such as `landing AND (stability OR "is saved")`.

Outputs:

- `<title>/comments.json` – full nested comment threads, including replies.
- `<title>/comments.csv` – flattened rows (one per comment or reply) streamed to disk while a progress bar tracks completion.
- `<title>/search_<keywords>.txt` – summary of the search results (if a query was entered).
- After completion `ytcomments.py` switches the current working directory to the new output folder, making it easy to run `ytsearch.py` immediately.

### Search previously saved comments

1. `cd` into a directory created by `ytcomments.py` (contains a `comments.csv`).
2. Run:

    ```bash
    python3 ../ytsearch.py
    ```

   (adjust the path if the search script lives elsewhere.)

3. Enter your boolean keyword expression when prompted; results print to the
   console and a `search_<keywords>.txt` log is generated.

## Boolean search syntax

- Words are matched case-insensitively.
- Use `AND` / `OR` for explicit logic (default is implicit AND between terms).
- Quotes (`"phrase match"`) keep words together.
- Parentheses group expressions: `rocket AND (raptor OR "engine test")`.

Invalid expressions (e.g., dangling operators, unmatched parentheses) result in
a helpful error and the search is skipped.

## Repo notes

- Generated CSV/JSON/log files are ignored by default (`.gitignore` covers
  `*/comments.csv`, `*/comments.json`, and `*/search_*.txt`).
- Example outputs (`First Run`, `Version_2_Is_Gone_Starship_V3_Begins_NOW_Starbase_Update`) are tracked for reference.

Feel free to modify the scripts to fit your workflow—e.g., tweaking output
locations or expanding the search UI.
